<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Emirhan Aksu - Giriş</title>

    <meta name="author" content="Emirhan Aksu" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
      integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="shortcut icon" href="/images/sticker.png" type="image/x-icon">


    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins&family=Quicksand&family=Righteous&display=swap"
      rel="stylesheet"
    />

    <link href="https://fonts.cdnfonts.com/css/trt" rel="stylesheet">


    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="login.css" />
  </head>
  <body id="body">

    
    <nav class="navbar navbar-expand-md navbar-dark">
      <div class="container">
          <a href="index.html" class="navbar-brand">
              <img src="/images/sticker.png" alt="logo" width="100" height="100">
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsible">
              <span class="navbar-toggler-icon"></span>
          </button>

          <div id="collapsible" class="collapse navbar-collapse">
              <ul class="navbar-nav me-auto">
                  <li class="nav-item">
                      <a href="index.html" class="nav-link">Anasayfa</a>
                    </li>
              </ul>
          </div>

      </div>
  </nav>


    <main class="signup-page container mb-5">
      <h1 class="signup-title pt-5 fw-bolder">Giriş Yap</h1>
      <div class="signup-form pt-3">

        
        <label class="text-dark fw-bold" for="email">Mail:</label>
        <input
          type="text"
          id="email"
          class="rounded-3"
          placeholder="adsoyad@gmail.com"
        />

        <label class="text-dark fw-bolder" for="password">Şifreniz:</label>
        <input
          type="password"
          id="password"
          class="rounded-3"
          placeholder="********"
        />

        <div class="row-cols-6 buttons">
          <button class="btn btn-light text-primary" id="login" type="submit">Giriş Yap</button>
          <button class="btn btn-light text-primary sifre">Şifremi Unuttum</button>
        </div>
        
        <form action="/register.html">
          <div class="row-cols-6 kayit">
            <a href="/register.html" target="_blank">
              <button class="btn btn-light w-100 text-primary">Kayıt Ol</button>
            </a>
          </div>
        </form>
      
      </div>
    </main>
    
    <footer class="py-4 text-center text-light mt-auto fixed-bottom">
      <span class="container text-center lead">
        Tüm hakları saklıdır. @2023
      </span>
      <span class="github">
        <a
          href="https://github.com/eqselans"
          class="fab fa-github"
          target="_blank"
        >
        </a>
      </span>
    </footer>


    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    
  </body>
  
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.20.0/firebase-app.js";
    import { getDatabase,set,ref ,update} from "https://www.gstatic.com/firebasejs/9.20.0/firebase-database.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.20.0/firebase-analytics.js";
    import { getAuth, createUserWithEmailAndPassword,signInWithEmailAndPassword  } from "https://www.gstatic.com/firebasejs/9.20.0/firebase-auth.js";

    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyBjCavVhBJF1chX1FHnJMT_SI9KUql643w",
      authDomain: "webtechproject-1b2fa.firebaseapp.com",
      databaseURL: "https://webtechproject-1b2fa-default-rtdb.firebaseio.com",
      projectId: "webtechproject-1b2fa",
      storageBucket: "webtechproject-1b2fa.appspot.com",
      messagingSenderId: "487797158689",
      appId: "1:487797158689:web:7adb5f0f937c5971f68460",
      measurementId: "G-CXKMNJF36C"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const database = getDatabase(app);
    const auth = getAuth();
    
    kayit.addEventListener('click',(e)=>{

      var email= document.getElementById('email').value;
      var password= document.getElementById('password').value;

      

      createUserWithEmailAndPassword(auth, email, password)
  .then((userCredential) => {
    // Signed in 
    const user = userCredential.user;

    set(ref(database,'users/'+ user.uid),{
      email: email
    })

    alert("Kullanıcı oluşturuldu");
    // ...
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
    // ..

    alert(errorMessage);
  });
    });

    login.addEventListener('click',(e)=>{

      var email= document.getElementById('email').value;
      var password= document.getElementById('password').value;

      signInWithEmailAndPassword(auth, email, password)
  .then((userCredential) => {
    // Signed in 
    const user = userCredential.user;

    const dt = new Date();

    update(ref(database,'users/'+ user.uid),{
      last_login:dt,
    });

    alert('Kullanıcı giriş yaptı');
    // ...
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;

    alert(errorMessage);

  });

    });
  </script>
</html>
